#pragma once

//-----------------------------------------------------------------------------------------
// include
//-----------------------------------------------------------------------------------------
//* base
#include <Engine/Game/Behavior/AnimationBehavior.h>

//* c++
#include <list>
#include <memory>

////////////////////////////////////////////////////////////////////////////////////////////
// FieldTree class
////////////////////////////////////////////////////////////////////////////////////////////
class FieldTree
	: public AnimationBehavior {
public:

	//=========================================================================================
	// public methods
	//=========================================================================================

	FieldTree()  = default;
	~FieldTree() = default;

	void Init(uint32_t id, DeltaTimePoint startTime);

	void Term();

	void Update();

private:

	//=========================================================================================
	// private variables
	//=========================================================================================

	std::unique_ptr<Animator> animator_;
	DeltaTimePoint animationTimer_;

};

////////////////////////////////////////////////////////////////////////////////////////////
// Field class
////////////////////////////////////////////////////////////////////////////////////////////
class Field
	: public BaseBehavior {
public:

	//=========================================================================================
	// public methods
	//=========================================================================================

	Field()  = default;
	~Field() { Term(); }

	void Init();

	void Term();

	void Update();

private:

	//=========================================================================================
	// private variables
	//=========================================================================================

	std::list<std::unique_ptr<FieldTree>> trees_;

	void AddTree(uint32_t id, DeltaTimePoint startTime);

};